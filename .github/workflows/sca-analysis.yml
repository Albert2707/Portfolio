name: SCA Analysis
on:
 push:
  branches: [main]
 pull_request:
  branches: [main]

jobs:
  snyk_scan:
    name: An√°lisis SCA con Snyk
    runs-on: ubuntu-latest
    steps:
     - name: Clonar repositorio
       uses: actions/checkout@v3

     - name: Instalar nodejs 
       uses: actions/setup-nodejs
       with:
         node-version: 20.x

     - name: Instalar snyk
       run: npm install snyk -g

     - name: Autenticacion mediante snyk cli
       run: snyk auth ${{SNYK_TOKEN}}

     - name: Corremos las pruebas por snyk
       run: snyk test